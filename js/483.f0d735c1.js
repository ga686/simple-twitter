"use strict";(self["webpackChunksimple_twitter"]=self["webpackChunksimple_twitter"]||[]).push([[483],{9483:function(t,r,s){s.r(r),s.d(r,{default:function(){return d}});var e=function(){var t=this,r=t._self._c;return r("div",{staticClass:"container"},[t._m(0),r("form",{on:{submit:function(r){return r.preventDefault(),r.stopPropagation(),t.handleSubmit.apply(null,arguments)}}},[r("div",{staticClass:"form-label-group",class:{errorAccount:t.errorAccount}},[r("label",{attrs:{for:"account"}},[t._v("帳號")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],attrs:{id:"account",name:"account",autofocus:"",type:"name",placeholder:"請輸入帳號",autocomplete:"account"},domProps:{value:t.account},on:{input:function(r){r.target.composing||(t.account=r.target.value)}}})]),r("div",{staticClass:"form-label-group",class:{errorPassword:t.errorPassword}},[r("label",{attrs:{for:"password"}},[t._v("密碼")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",name:"password",type:"password",placeholder:"請輸入密碼",autocomplete:"password"},domProps:{value:t.password},on:{input:function(r){r.target.composing||(t.password=r.target.value)}}})]),r("button",{staticClass:"btn"},[t._v("登入")])]),r("div",{staticClass:"other-link d-flex justify-content-end"},[r("router-link",{attrs:{to:"admin/signin"}},[r("div",{staticClass:"btn-cancel"},[r("u",[t._v("前台登入")])])])],1)])},o=[function(){var t=this,r=t._self._c;return r("div",{staticClass:"header"},[r("img",{staticClass:"logo",attrs:{src:s(6949),alt:"logo"}}),r("h3",[t._v("後台登入")])])}],a=(s(7658),s(4711)),n=s(3507),i={data(){return{account:"",password:"",isProcessing:!1,errorAccount:!1,errorPassword:!1}},methods:{async handleSubmit(){try{if(!this.account||!this.password)return n.Z9.warning("請輸入帳號及密碼"),void(this.isInputNull=!0);const{data:t}=await a.Z.signIn({account:this.account,password:this.password});if(this.isProcessing=!0,"error"===t.status)throw new Error;localStorage.setItem("token",t.token),this.$store.commit("setCurrentUser",t.user),n.Z9.success("登入成功！"),this.$router.push({name:"admin-tweets"})}catch(t){this.isProcessing=!1;let r=t.response.data.message;"Error: admin permission denied"===r?(n.Z9.error("請由前台登入"),this.errorAccount=!0):"Error: The account is incorrect!"===r?(n.Z9.error("帳號不存在！"),this.errorAccount=!0):"Error: The password is incorrect!"===r&&(n.Z9.error("密碼有誤"),this.errorPassword=!0)}}},watch:{account(){this.errorAccount=!1},password(){this.errorPassword=!1}}},c=i,u=s(1001),l=(0,u.Z)(c,e,o,!1,null,"2feb5d83",null),d=l.exports},4711:function(t,r,s){var e=s(6163);r["Z"]={signIn({account:t,password:r}){return e.l.post("/api/admin/signin",{account:t,password:r})},getAllTweets(){return e.l.get("/api/admin/tweets")},getAllUsers(){return e.l.get("/api/admin/users")},deleteTweet(t){return e.l["delete"](`/api/admin/tweets/${t}`)}}}}]);
//# sourceMappingURL=483.f0d735c1.js.map