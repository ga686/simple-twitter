"use strict";(self["webpackChunksimple_twitter"]=self["webpackChunksimple_twitter"]||[]).push([[349],{2545:function(t,s,i){i.d(s,{Z:function(){return d}});var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"navbar ml-auto d-flex justify-content-between"},[s("div",{staticClass:"navbar_wrap"},[s("div",{staticClass:"navbar_logo"},[s("router-link",{attrs:{to:"/admin/tweets"}},[s("img",{attrs:{src:i(6602)}})])],1),s("div",{staticClass:"navbar_item"},[s("router-link",{staticClass:"nav_link",attrs:{to:"/admin/tweets"}},[s("div",{staticClass:"nav_link-icon home"}),s("p",[t._v("推文清單")])])],1),s("div",{staticClass:"navbar_item"},[s("router-link",{staticClass:"nav_link",attrs:{to:"/admin/users"}},[s("div",{staticClass:"nav_link-icon user"}),s("p",[t._v("使用者列表")])])],1),s("div",{staticClass:"navbar_item mobile",on:{click:t.logout}},[t._m(0)])]),s("div",{staticClass:"navbar_item medium",on:{click:t.logout}},[t._m(1)])])},a=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"nav_link"},[s("div",{staticClass:"nav_link-icon logout"}),s("p",[t._v("登出")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"nav_link"},[s("div",{staticClass:"nav_link-icon logout"}),s("p",[t._v("登出")])])}],n=(i(7658),i(629)),r={computed:{...(0,n.rn)(["currentUser","isAuthenticated"])},methods:{logout(){this.$store.commit("rmAuthentication"),this.$router.push("/admin/signin")}}},l=r,o=i(1001),c=(0,o.Z)(l,e,a,!1,null,"8d1ea9d6",null),d=c.exports},3349:function(t,s,i){i.r(s),i.d(s,{default:function(){return _}});var e=function(){var t=this,s=t._self._c;return s("main",{staticClass:"admin-view"},[s("NavbarAdmin"),t.isProcessing?s("LoadingSpinner"):[s("div",{staticClass:"admin_box"},[s("div",{staticClass:"admin_box-title"},[s("h5",{staticClass:"size-18"},[t._v("推文清單")])]),s("div",{staticClass:"admin_box_wrap"},t._l(t.tweets,(function(i){return s("div",{key:i.id,staticClass:"admin_box_wrap-item d-flex"},[s("div",{staticClass:"d-flex flex-fill"},[s("div",{staticClass:"avatar_image"},[s("img",{attrs:{src:t._f("emptyImage")(i.userData.avatar)}})]),s("div",[s("div",{staticClass:"d-flex admin_box_wrap-title align-items-center"},[s("h5",{staticClass:"size-16"},[t._v(t._s(i.userData.name))]),s("div",{staticClass:"d-flex"},[s("p",{staticClass:"size-14 ml-1"},[t._v(t._s(t._f("account")(i.userData.account)))]),t._v(" ・ "),s("span",{staticClass:"size-14"},[t._v(t._s(t._f("fromNow")(i.createdAt)))])])]),s("div",{staticClass:"mb-3 mt-1 admin_box_wrap-content"},[t._v(t._s(i.description))])])]),s("div",{staticClass:"tweet-delete-btn",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.deleteTweet(i.id)}}},[s("i",{staticClass:"fa-solid fa-xmark size-20"})])])})),0)])]],2)},a=[],n=i(2545),r=i(4711),l=i(4409),o=i(3507),c=i(6163),d={data(){return{tweets:[],isProcessing:!1}},components:{NavbarAdmin:n.Z,LoadingSpinner:l.Z},mixins:[o.Lf,o.qk,o.$2],methods:{async fetchTweets(){try{this.isProcessing=!0;const{data:t}=await r.Z.getAllTweets();if("error"===t.status)throw new Error(t.message);this.tweets=t,this.isProcessing=!1}catch(t){this.isProcessing=!1,console.log(t),c.F.fire({icon:"error",title:"無法取得推文資料，請稍後再試"})}},async deleteTweet(t){try{const{data:s}=await r.Z.deleteTweet(t);if("error"===s.status)throw new Error(s.message);c.F.fire({title:"<h5 style='color:#fff'>確定刪除嗎？</h5>",icon:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonColor:"#FF6600",confirmButtonText:"確定刪除！",cancelButtonText:"取消刪除！",background:"#555",customClass:{title:"swal2-title-delete"},timer:5e3,closeOnConfirm:!1,closeOnCancel:!1}).then((s=>{s.value&&(this.tweets=this.tweets.filter((s=>s.id!==t)))}))}catch(s){o.Z9.error("無法刪除推文，請稍後再試")}}},created(){this.fetchTweets()}},u=d,v=i(1001),m=(0,v.Z)(u,e,a,!1,null,"8fd682e6",null),_=m.exports},4711:function(t,s,i){var e=i(6163);s["Z"]={signIn({account:t,password:s}){return e.l.post("/api/admin/signin",{account:t,password:s})},getAllTweets(){return e.l.get("/api/admin/tweets")},getAllUsers(){return e.l.get("/api/admin/users")},deleteTweet(t){return e.l["delete"](`/api/admin/tweets/${t}`)}}}}]);
//# sourceMappingURL=349.f309dde2.js.map